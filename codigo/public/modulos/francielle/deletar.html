<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Deletar Usuário</title>
<link rel="stylesheet" href="deletar.css">
</head>
<body>

<div class="container">
  <h2>Deletar Usuário</h2>
  <p id="msg">Carregando usuário...</p>

  <div id="botoes" class="botoes" style="display:none;">
    <button id="confirmar">Confirmar</button>
    <button id="cancelar">Cancelar</button>
  </div>

  <a class="back-link" href="usarios.html">← Voltar para a lista</a>
</div>

<script>
const URL_API = "http://localhost:3000/pessoas";

// Pegar o ID do usuário passado na URL
const params = new URLSearchParams(window.location.search);
const id = params.get('id');

if(id) {
  fetch(`${URL_API}/${id}`)
    .then(res => res.json())
    .then(u => {
      document.getElementById("msg").textContent = `Deseja realmente deletar o usuário "${u.nome}"?`;
      document.getElementById("botoes").style.display = "block";
    })
    .catch(err => document.getElementById("msg").textContent = "Erro ao carregar usuário.");
}

// Botão Confirmar
document.getElementById("confirmar").addEventListener("click", () => {
  fetch(`${URL_API}/${id}`, { method: "DELETE" })
    .then(() => {
      alert("Usuário deletado com sucesso!");
      window.location.href = "index.html";
    })
    .catch(err => alert("Erro ao deletar usuário."));
});

// Botão Cancelar
document.getElementById("cancelar").addEventListener("click", () => {
  window.location.href = "index.html";
});
</script>

</body>
</html>
