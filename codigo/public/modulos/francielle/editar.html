<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Editar Usuário</title>
<link rel="stylesheet" href="./editar.css">
</head>
<body>
<h2>Editar Usuário</h2>
<form id="form-editar">
  <input type="hidden" id="edit-id">
  <label>Nome:</label>
  <input type="text" id="edit-nome" required><br><br>
  <label>Idade:</label>
  <input type="number" id="edit-idade" required><br><br>
  <label>Contato:</label>
  <input type="text" id="edit-contato" required><br><br>
  <button type="submit">Salvar</button>
</form>

<script>
const URL_API = "http://localhost:3000/pessoas";

// Pegar o ID do usuário passado na URL
const params = new URLSearchParams(window.location.search);
const id = params.get('id');

if(id) {
  fetch(`${URL_API}/${id}`)
    .then(res => res.json())
    .then(u => {
      document.getElementById("edit-id").value = u.id;
      document.getElementById("edit-nome").value = u.nome;
      document.getElementById("edit-idade").value = u.idade;
      document.getElementById("edit-contato").value = u.contato;
    });
}

// Salvar alterações
document.getElementById("form-editar").addEventListener("submit", function(e){
  e.preventDefault();

  const atualizado = {
    nome: document.getElementById("edit-nome").value,
    idade: Number(document.getElementById("edit-idade").value),
    contato: document.getElementById("edit-contato").value
  };

  fetch(`${URL_API}/${id}`, {
    method: "PUT",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(atualizado)
  })
  .then(() => {
    alert("Usuário atualizado com sucesso!");
    window.location.href = "index.html"; // voltar para a lista
  });
});
</script>
</body>
</html>
